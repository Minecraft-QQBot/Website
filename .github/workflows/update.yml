name: pushè‡ªåŠ¨æ›´æ–°

on:
  push:
    branches:
      - main

env: # è®¾ç½®ç¯å¢ƒå˜é‡
  TZ: Asia/Shanghai # æ—¶åŒºï¼ˆè®¾ç½®æ—¶åŒºå¯ä½¿é¡µé¢ä¸­çš„`æœ€è¿‘æ›´æ–°æ—¶é—´`ä½¿ç”¨æ—¶åŒºæ—¶é—´ï¼‰

jobs:
  push-to-server: # è‡ªå®šä¹‰åç§°
    runs-on: ubuntu-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v2

      - name: æ£€æŸ¥å½“å‰ç›®å½•
        run: pwd

      - name: åˆ—å‡º web æ–‡ä»¶å¤¹å†…å®¹
        run: ls -la ./web

      - name: ğŸš éƒ¨ç½²åˆ°æœåŠ¡å™¨
        uses: wlixcc/SFTP-Deploy-Action@v1.2.4
        with:
          username: 'root' #ssh user name
          port: '22' # è¿œç¨‹æœåŠ¡å™¨sshç«¯å£ï¼Œé»˜è®¤22
          server: ${{ secrets.IP }} # è¿œç¨‹æœåŠ¡å™¨IPåœ°å€
          ssh_private_key: ${{ secrets.SSH_PRIVATE_KEY }} # è®¤è¯æœåŠ¡å™¨ç§˜é’¥å¯¹çš„ç§é’¥
          local_path: './web/' # å¯¹åº”æˆ‘ä»¬é¡¹ç›®æ‰“åŒ…åçš„é™æ€æ–‡ä»¶è·¯å¾„
          remote_path: '/www/wwwroot/qqbot.ylmty.cc' # æœåŠ¡å™¨ä¸Šçš„è·¯å¾„
          delete_remote_files: true # æ˜¯å¦åˆ é™¤è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶
